<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Employee Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Employee List</h1>
    <h2>Add New Employee</h2>
    <form action="{{ url_for('main.add_employee') }}" method="POST">
        <input type="text" name="first_name" placeholder="First Name" required>
        <input type="text" name="last_name" placeholder="Last Name" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="text" name="phone" placeholder="Phone">
        <input type="text" name="position" placeholder="Position">
        <button type="submit">Add Employee</button>
    </form>
    
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>ชื่อ</th>
          <th>นามสกุล</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Position</th>
          <th>Created At</th>
          <th>Updated At</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for emp in employees %}
        <tr>
          <!-- ฟอร์มแก้ไข -->
          <form action="{{ url_for('main.edit_employee', employee_id=emp.employee_id) }}" method="POST">
            <td>{{ emp.employee_id }}</td>
            <td><input type="text" name="first_name" value="{{ emp.first_name }}"></td>
            <td><input type="text" name="last_name" value="{{ emp.last_name }}"></td>
            <td><input type="email" name="email" value="{{ emp.email }}"></td>
            <td><input type="text" name="phone" value="{{ emp.phone }}"></td>
            <td><input type="text" name="position" value="{{ emp.position }}"></td>
            <td>{{ emp.created_at }}</td>
            <td>{{ emp.updated_at }}</td>
            <td>
              <button type="submit" class="btn-edit">ยืนยัน</button>
              <a href="{{ url_for('main.index') }}">ยกเลิก</a>
          </form>

          <!-- ฟอร์มลบ -->
              <form action="{{ url_for('main.delete_employee', employee_id=emp.employee_id) }}" method="POST" style="display:inline;" onsubmit="return confirm('คุณแน่ใจหรือไม่ที่จะลบ?');">
                <button type="submit" class="btn-delete">ลบ</button>
              </form>
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</body>
</html>
